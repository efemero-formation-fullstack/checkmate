test_name: Test of the auth/login endpoint

stages:
  - name: Login without login field must fail
    request:
      url: http://localhost:8080/auth/login
      data:
        password: anything
      method: POST
    response:
      status_code: 400

  - name: Login without password field must fail
    request:
      url: http://localhost:8080/auth/login
      data:
        password: anything
      method: POST
    response:
      status_code: 400

  - name: Login with inexistant login must fail
    request:
      url: http://localhost:8080/auth/login
      data:
        login: inexistant_login
        password: test_password
      method: POST
    response:
      status_code: 401

  - name: Login as admin with a bad password must fail
    request:
      url: http://localhost:8080/auth/login
      data:
        login: MrCheckmate
        password: not_the_password
      method: POST
    response:
      status_code: 401

  - name: Login as player with a bad password must fail
    request:
      url: http://localhost:8080/auth/login
      data:
        login: test_player
        password: not_the_password
      method: POST
    response:
      status_code: 401

  - name: Login as player
    request:
      url: http://localhost:8080/auth/login
      data:
        login: test_player
        password: test_password
      method: POST
    response:
      status_code: 200

  - name: Login as admin
    request:
      url: http://localhost:8080/auth/login
      data:
        login: MrCheckmate
        password: SUPER_SECRET_PASSWORD
      method: POST
    response:
      status_code: 200
  - name: Login as player
    request:
      url: http://localhost:8080/auth/login
      data:
        login: test_player
        password: test_password
      method: POST
    response:
      status_code: 200

  - name: Login as admin
    request:
      url: http://localhost:8080/auth/login
      data:
        login: MrCheckmate
        password: SUPER_SECRET_PASSWORD
      method: POST
    response:
      status_code: 200

  - name: Login with additional fields
    request:
      url: http://localhost:8080/auth/login
      data:
        login: test_player
        password: test_password
        other: anything
      method: POST
    response:
      status_code: 200
